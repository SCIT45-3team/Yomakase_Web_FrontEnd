<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Home</title>
    <style>
        @keyframes smoothAppear {
            from {
                opacity: 0;
                transform: translate3d(0, -100%, 0);
            }
            to {
                opacity: 1;
                transform: translateZ(0);
            }
        }

        /* 모달 창 스타일 */
        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 20px;
            width: 80%;
            height: 100%;
            max-width: 500px;
            max-height: 650px;
            text-align: center;
            border-radius: 10px;
            position: relative;
        }

        /* first-container와 second-container에 공통 적용 */
        .first-container, .second-container {
            position: absolute;
            padding: 20px;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            max-width: 500px;
            max-height: 600px;
            transition: opacity 0.5s, transform 0.5s;
        }

        /* first-container의 기본 스타일 */
        .first-container {
            z-index: 2;
            opacity: 1;
            transform: translateX(0);
            visibility: visible;
            pointer-events: auto; /* 클릭 가능 */
        }

        /* first-container가 숨겨진 상태일 때 */
        .first-container.hidden {
            opacity: 0;
            transform: translateX(-100%);
            z-index: 1;
            visibility: hidden;
            pointer-events: none; /* 클릭 불가능 */
        }

        /* second-container의 기본 스타일 */
        .second-container {
            opacity: 0;
            transform: translateX(100%);
            z-index: 1;
            visibility: hidden; /* 화면에서 숨기기 */
            pointer-events: none; /* 클릭 불가능 */
        }

        /* second-container가 활성화된 상태일 때 */
        .second-container.active {
            opacity: 1;
            transform: translateX(0);
            z-index: 2;
            visibility: visible;
            pointer-events: auto; /* 클릭 가능 */
        }

        #box {
            display: flex;
            justify-content: center;
            flex-direction: column;
            align-items: center;
            margin: 0;
        }

        #logo-image {
            max-width: 50%;
            height: auto;
        }

        .home-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            font-family: 'Noto Sans KR', sans-serif;
        }

        .home-title {
            opacity: 0;
            animation: smoothAppear 1s forwards;
            animation-delay: 0.5s;
            margin: 15px 0;
            font-size: 2.4rem;
            font-weight: bold;
            color: #81c405;
            text-align: center;
        }

        .home-contents {
            opacity: 0;
            animation: smoothAppear 1s forwards;
            animation-delay: 1s;
            margin: 15px 0;
            font-size: 1.5rem;
            color: #282c34;
            text-align: center;
        }

        /* 모달 배경 */
        .modal {
            display: none; /* 처음엔 보이지 않도록 설정 */
            position: fixed;
            z-index: 1000; /* z-index를 충분히 높게 설정 */
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.5); /* 반투명 검정 배경 */
        }



        /* 버튼 스타일 */
        .button-container {
            display: flex;
            flex-direction: row; /* 가로로 배치 */
            justify-content: center; /* 가운데 정렬 */
            gap: 10px; /* 버튼 간의 간격 */
        }

        .btn {
            padding: 10px 20px;
            margin: 10px;
            background-color: #81c405;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .btn:hover {
            background-color: #555;
        }

        /* 폼 스타일 */
        .form-group {
            margin-bottom: 15px;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }

        .form-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
            box-sizing: border-box;
        }

        /* 알레르기 영역을 감싸는 부모 요소 */
        .allergy-group {
            max-height: 250px; /* 필요에 따라 높이를 조정하세요 */
            overflow-y: auto;
            margin-bottom: 15px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        /* 드롭다운 스타일 수정 */
        .dropdown {
            position: relative;
            text-align: left;
            margin-bottom: 10px;
        }

        .dropdown-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            padding: 10px;
            background-color: #f1f1f1;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-weight: bold;
            color: #333;
            transition: background-color 0.3s;
        }

        .dropdown-label:hover {
            background-color: #ddd;
        }

        .dropdown-content {
            display: none;
            position: relative; /* 수정된 부분: 드롭다운 메뉴가 부모 요소 안에서 위치하도록 */
            width: 100%;
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            z-index: 1;
        //max-height: 200px;
        //overflow-y: auto;
            margin-top: 5px; /* 드롭다운 메뉴와 레이블 사이에 간격 추가 */
            overflow: hidden; /* 내부 스크롤 제거 */
        }

        .dropdown-content.show {
            display: block;
        }

        .dropdown-content label {
            display: block;
            padding: 10px;
            border-bottom: 1px solid #ddd;
            cursor: pointer;
        }

        .dropdown-content label:last-child {
            border-bottom: none;
        }

        .dropdown-content label.selected {
            background-color: #81c405;
            color: white;
        }

        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            position: relative;
        }

        .custom-heading {
            font-size: 1.5em;
            font-weight: bold;
            margin: 0.67em 0;
            color: inherit;
            flex: 1;
            text-align: center;
        }

        .header .back-btn {
            font-size: 1.8rem;
            color: #81c405;
            border: none;
            cursor: pointer;
            background: none;
            visibility: visible; /* 기본값 */
        }

        .close {
            color: #aaa;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        /* 닫기 버튼 */

        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }

        /* 성별 토글 버튼 스타일 */
        .gender-group {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .gender-toggle {
            display: flex;
            border: 1px solid #ddd;
            border-radius: 15px;
            overflow: hidden;
            cursor: pointer;
            background-color: #f1f1f1;
            position: relative;
        }

        .gender-toggle button {
            flex: 1;
            border: none;
            padding: 10px;
            background-color: #fff;
            color: #333;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s, color 0.3s;
        }

        .gender-toggle button.selected {
            background-color: #81c405;
            color: white;
        }

        .gender-toggle button:nth-of-type(1) {
            border-right: 1px solid #ddd;
        }

        .gender-toggle button:hover {
            background-color: #ddd;
        }

    </style>
</head>
<body>
<div id="box">
    <img id="logo-image" src="assets/img/logo_home.png" alt="Logo">
    <div class="home-wrapper">
        <div class="home-title">
            <img src="assets/img/slogan.png" alt="Logo" style="width: 80%">
        </div>
        <div class="home-contents">
            ❖ 영수증 사진으로 재료를 간편하게 등록할 수 있습니다️ ❖
        </div>

        <!-- 버튼들을 가로로 배치 -->
        <div class="button-container">
            <!-- 로그인 버튼 -->
            <button id="loginBtn" class="btn">로그인</button>

            <!-- 회원가입 버튼 -->
            <button id="signupBtn" class="btn">회원가입</button>
        </div>
    </div>
</div>

<!-- 모달 창 -->
<div id="loginModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2>로그인</h2>
        <!-- 로그인 폼 -->
        <input type="text" placeholder="아이디" style="width: 80%; padding: 10px; margin: 10px 0;">
        <input type="password" placeholder="비밀번호" style="width: 80%; padding: 10px; margin: 10px 0;">
        <button class="btn">로그인</button>
    </div>
</div>

<div id="signupModal" class="modal">
    <div class="modal-content">
        <div class="first-container">
            <div class="header">
                <button class="back-btn" style="display: none;">&lt;</button> <!-- back-btn을 숨김 -->
                <div class="custom-heading">회원가입</div>
                <span class="close">&times;</span>
            </div>
            <form id="signup-form" action="#" method="post" class="signup-form">
                <div class="form-group">
                    <label for="email">이메일</label>
                    <input type="email" id="email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="nickname">닉네임</label>
                    <input type="text" id="nickname" name="nickname" required>
                </div>
                <div class="form-group">
                    <label for="password">비밀번호</label>
                    <input type="password" id="password" name="password" required>
                </div>
                <div class="form-group">
                    <label for="confirm_password">비밀번호 확인</label>
                    <input type="password" id="confirm_password" name="confirm_password" required>
                </div>
                <div class="form-group">
                    <label for="birthdate">생년월일</label>
                    <input type="date" id="birthdate" name="birthdate" required>
                </div>
                <div class="form-group gender-group">
                    <label>성별</label>
                    <div class="gender-toggle">
                        <button type="button" id="male-btn" class="selected">남성</button>
                        <button type="button" id="female-btn">여성</button>
                    </div>
                    <input type="hidden" id="gender" name="gender" value="male">
                </div>
                <button type="button" id="next-btn" class="btn">다음</button>
            </form>
        </div>
        <div class="second-container">
            <div class="header">
                <button class="back-btn">&lt;</button> <!-- back-btn이 보임 -->
                <div class="custom-heading">회원가입</div>
                <span class="close">&times;</span>
            </div>
            <div class="form-group">
                <label for="height">키</label>
                <input type="text" id="height" name="height" required>
            </div>
            <div class="form-group">
                <label for="weight">몸무게</label>
                <input type="text" id="weight" name="weight" required>
            </div>
            <div class="form-group">
                <label>알레르기 정보</label>
                <div class="allergy-group">
                    <div class="dropdown">
                        <div class="dropdown-label" id="meat-dropdown">
                            고기류
                            <span id="meat-chevron">&#9662;</span>
                        </div>
                        <div class="dropdown-content" id="meat-content">
                            <label><input type="hidden" name="allergy" value="알"> 알 (가금류만 해당한다)</label>
                            <label><input type="hidden" name="allergy" value="돼지고기"> 돼지고기</label>
                            <label><input type="hidden" name="allergy" value="닭고기"> 닭고기</label>
                            <label><input type="hidden" name="allergy" value="쇠고기"> 쇠고기</label>
                        </div>
                    </div>
                    <div class="dropdown">
                        <div class="dropdown-label" id="seafood-dropdown">
                            해산물
                            <span id="seafood-chevron">&#9662;</span>
                        </div>
                        <div class="dropdown-content" id="seafood-content">
                            <label><input type="hidden" name="allergy" value="고등어"> 고등어</label>
                            <label><input type="hidden" name="allergy" value="게"> 게</label>
                            <label><input type="hidden" name="allergy" value="새우"> 새우</label>
                            <label><input type="hidden" name="allergy" value="오징어"> 오징어</label>
                            <label><input type="hidden" name="allergy" value="조개류"> 조개류 (굴, 전복, 홍합을 포함한다)</label>
                        </div>
                    </div>
                    <div class="dropdown">
                        <div class="dropdown-label" id="fruit-dropdown">
                            과일류
                            <span id="fruit-chevron">&#9662;</span>
                        </div>
                        <div class="dropdown-content" id="fruit-content">
                            <label><input type="hidden" name="allergy" value="복숭아"> 복숭아</label>
                            <label><input type="hidden" name="allergy" value="토마토"> 토마토</label>
                        </div>
                    </div>
                    <div class="dropdown">
                        <div class="dropdown-label" id="nut-dropdown">
                            견과류
                            <span id="nut-chevron">&#9662;</span>
                        </div>
                        <div class="dropdown-content" id="nut-content">
                            <label><input type="hidden" name="allergy" value="땅콩"> 땅콩</label>
                            <label><input type="hidden" name="allergy" value="대두"> 대두</label>
                            <label><input type="hidden" name="allergy" value="호두"> 호두</label>
                            <label><input type="hidden" name="allergy" value="잣"> 잣</label>
                        </div>
                    </div>
                    <div class="dropdown">
                        <div class="dropdown-label" id="grain-dropdown">
                            곡물
                            <span id="grain-chevron">&#9662;</span>
                        </div>
                        <div class="dropdown-content" id="grain-content">
                            <label><input type="hidden" name="allergy" value="메밀"> 메밀</label>
                            <label><input type="hidden" name="allergy" value="밀"> 밀</label>
                        </div>
                    </div>
                    <div class="dropdown">
                        <div class="dropdown-label" id="dairy-dropdown">
                            유제품
                            <span id="dairy-chevron">&#9662;</span>
                        </div>
                        <div class="dropdown-content" id="dairy-content">
                            <label><input type="hidden" name="allergy" value="우유"> 우유</label>
                        </div>
                    </div>
                </div>
            </div>
            <button type="submit" class="btn">제출</button>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // 로그인 모달
        var loginModal = document.getElementById("loginModal");
        var loginBtn = document.getElementById("loginBtn");
        var closeBtns = document.getElementsByClassName("close");

        // 회원가입 모달
        var signupModal = document.getElementById("signupModal");
        var signupBtn = document.getElementById("signupBtn");

        // 로그인 버튼 클릭 시 모달 열기
        loginBtn.onclick = function() {
            loginModal.style.display = "block";
        }

        // 회원가입 버튼 클릭 시 모달 열기
        signupBtn.onclick = function() {
            signupModal.style.display = "block";
        }

        // 모달 닫기
        Array.from(closeBtns).forEach(function(element) {
            element.onclick = function() {
                loginModal.style.display = "none";
                signupModal.style.display = "none";
            }
        });

        // 모달 외부 클릭 시 모달 닫기
        window.onclick = function(event) {
            if (event.target == loginModal) {
                loginModal.style.display = "none";
            }
            if (event.target == signupModal) {
                signupModal.style.display = "none";
            }
        }

        // back-btn 클릭 시 화면 전환
        document.querySelectorAll('.back-btn').forEach(function(backBtn) {
            if (backBtn.style.display !== 'none') { // 버튼이 보일 때만 이벤트 리스너 추가
                backBtn.addEventListener('click', function() {
                    document.querySelector('.second-container').classList.remove('active');
                    document.querySelector('.first-container').classList.remove('hidden');
                });
            }
        });

        // 드롭다운 토글 함수
        function toggleDropdown(dropdownId) {
            // 모든 드롭다운 메뉴를 닫기
            document.querySelectorAll('.dropdown-content').forEach(content => {
                if (content.id !== dropdownId) {
                    content.style.display = 'none';
                }
            });

            // 클릭된 드롭다운 메뉴만 열기
            const content = document.getElementById(dropdownId);
            if (content.style.display === 'block') {
                content.style.display = 'none';
            } else {
                content.style.display = 'block';
            }

            // 스크롤 기능이 적용된 부모 요소의 높이 조정
            adjustAllergyGroupHeight();
        }

        // 알레르기 영역의 높이 조정 함수
        function adjustAllergyGroupHeight() {
            const allergyGroup = document.querySelector('.allergy-group');
            let totalHeight = 0;

            document.querySelectorAll('.dropdown').forEach(dropdown => {
                totalHeight += dropdown.offsetHeight;
            });

            allergyGroup.style.height = totalHeight + 'px';
        }

        // 드롭다운 레이블 클릭 시 이벤트 리스너 수정
        document.getElementById('meat-dropdown').addEventListener('click', () => toggleDropdown('meat-content'));
        document.getElementById('seafood-dropdown').addEventListener('click', () => toggleDropdown('seafood-content'));
        document.getElementById('fruit-dropdown').addEventListener('click', () => toggleDropdown('fruit-content'));
        document.getElementById('nut-dropdown').addEventListener('click', () => toggleDropdown('nut-content'));
        document.getElementById('grain-dropdown').addEventListener('click', () => toggleDropdown('grain-content'));
        document.getElementById('dairy-dropdown').addEventListener('click', () => toggleDropdown('dairy-content'));

        // 다음 버튼 클릭 시 화면 전환
        document.getElementById('next-btn').addEventListener('click', function() {
            document.querySelector('.first-container').classList.add('hidden');
            document.querySelector('.second-container').classList.add('active');
        });

        // 성별 버튼 클릭 시 상태 변경
        document.getElementById('male-btn').addEventListener('click', function() {
            document.getElementById('gender').value = 'male';
            document.getElementById('male-btn').classList.add('selected');
            document.getElementById('female-btn').classList.remove('selected');
        });

        document.getElementById('female-btn').addEventListener('click', function() {
            document.getElementById('gender').value = 'female';
            document.getElementById('female-btn').classList.add('selected');
            document.getElementById('male-btn').classList.remove('selected');
        });

        // 드롭다운 내용 클릭 시 선택 상태 토글 및 레이블 업데이트
        document.querySelectorAll('.dropdown-content label').forEach(label => {
            label.addEventListener('click', function() {
                const dropdownId = this.closest('.dropdown').querySelector('.dropdown-label').id;
                const inputElement = this.querySelector('input[type="hidden"]');
                const isSelected = this.classList.toggle('selected');
                if (isSelected) {
                    inputElement.setAttribute('name', 'allergy');
                } else {
                    inputElement.removeAttribute('name');
                }
                const selectedItems = Array.from(this.closest('.dropdown').querySelectorAll('.dropdown-content label.selected'))
                    .map(el => el.textContent.trim());
                updateDropdownLabel(dropdownId, selectedItems);
            });
        });

        // 드롭다운 레이블 업데이트 함수
        function updateDropdownLabel(dropdownId, selectedItems) {
            const dropdownLabel = document.getElementById(dropdownId);
            const originalText = dropdownLabel.getAttribute('data-original-text');
            if (selectedItems.length > 0) {
                dropdownLabel.textContent = `${originalText}: ${selectedItems.join(', ')}`;
            } else {
                dropdownLabel.textContent = originalText;
            }
        }

        // 드롭다운 레이블에 원본 텍스트 저장
        document.querySelectorAll('.dropdown-label').forEach(label => {
            label.setAttribute('data-original-text', label.textContent.replace(' ▾', '')); // 원본 텍스트 저장 시 ' ▾' 제거
        });
    });

</script>
</body>
</html>
